// Code generated by ecs/gen; DO NOT EDIT.
package ecs

import (
	"iter"
)

type Query0 struct {
	*View
}

func NewQuery0(reg *Registry, options ...QueryOption) *Query0 {
	viewBuilder := NewViewBuilder(reg)
	for _, opt := range options {
		opt(viewBuilder)
	}
	return &Query0{View: viewBuilder.Build()}
}

func (q *Query0) All() iter.Seq[Entity] {
	return func(yield func(Entity) bool) {
		for i := range q.baked {
			b := &q.baked[i]
			for j := 0; j < *b.len; j++ {
				if !yield((*b.entities)[j]) {
					return
				}
			}
		}
	}
}

func (q *Query0) Filter(entities []Entity) iter.Seq[Entity] {
	links := q.reg.archetypeRegistry.entityArchLinks
	return func(yield func(Entity) bool) {
		var lastArch *Archetype
		var cols [0]*column
		for _, e := range entities {
			link := links[e.Index()]
			arch := link.arch
			if arch == nil || !arch.mask.Contains(q.mask) {
				continue
			}
			if arch != lastArch {
				for i := 0; i < 0; i++ {
					cols[i] = arch.columns[q.compIDs[i]]
				}
				lastArch = arch
			}
			if !yield(e) {
				return
			}
		}
	}
}
